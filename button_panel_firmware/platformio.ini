; =============================================================================
; PlatformIO Project Configuration
; Button Panel v2.2.0 - ESP32-S3 XIAO (Dual-Core)
; 74HC595 (Output) + CD4021BE (Input)
; =============================================================================

[env:seeed_xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino

; -----------------------------------------------------------------------------
; Serial Monitor
; -----------------------------------------------------------------------------
monitor_speed = 115200
monitor_filters =
    esp32_exception_decoder
    time

; -----------------------------------------------------------------------------
; Build Configuration
; -----------------------------------------------------------------------------
build_flags =
    ; USB CDC für Serial
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1

    ; FreeRTOS Konfiguration
    -DCONFIG_FREERTOS_UNICORE=0
    -DCONFIG_FREERTOS_HZ=1000

    ; Debug Level (0=None, 1=Error, 2=Warn, 3=Info, 4=Debug, 5=Verbose)
    -DCORE_DEBUG_LEVEL=0

    ; Optimierungen
    -O2

; Für Debug-Build auskommentieren:
; build_type = debug
; build_flags =
;     ${env:seeed_xiao_esp32s3.build_flags}
;     -DDEBUG_BUTTONS
;     -DDEBUG_LEDS
;     -DDEBUG_TASKS
;     -DDEBUG_QUEUE_OVERFLOW
;     -DCORE_DEBUG_LEVEL=3

; -----------------------------------------------------------------------------
; Upload Settings
; -----------------------------------------------------------------------------
upload_speed = 921600

; -----------------------------------------------------------------------------
; Partitions
; -----------------------------------------------------------------------------
board_build.partitions = default.csv

; -----------------------------------------------------------------------------
; Check für Compiler-Warnungen
; -----------------------------------------------------------------------------
build_unflags = -Werror
